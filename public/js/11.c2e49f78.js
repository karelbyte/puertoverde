(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"051b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-sm full-height"},[e.hasEmptyState?a("div",{staticClass:"flex column flex-center empty-state"},[a("div",{staticClass:"text-h4 text-grey q-mb-lg"},[e._v("Aun no has ingresado ningun usuario!.")]),a("q-btn",{staticClass:"text-black q-mt-lg",attrs:{color:"green"},on:{click:function(t){return e.openAddDrawer()}}},[e._v("Crear usuario")])],1):a("q-card",[a("div",{staticClass:"bg-orange-3",staticStyle:{height:"10px"}}),a("q-card-section",[a("div",{staticClass:"row q-mb-md flex"},[a("q-input",{staticClass:"col-3",attrs:{outlined:"",debounce:"300",label:"Buscar por nombre o correo",dense:""},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("q-separator"),a("q-table",{attrs:{tile:"",flat:"",data:e.items,columns:e.columns,pagination:e.pagination,loading:e.loading,"binary-state-sort":"","hide-pagination":""},on:{"update:pagination":function(t){e.pagination=t},request:e.getItems},scopedSlots:e._u([{key:"body-cell-status",fn:function(t){return[a("q-td",{attrs:{props:t}},[t.row.status?a("q-chip",{attrs:{size:"12px",color:"green-2","text-color":"black"}},[e._v("\n              Activo\n            ")]):a("q-chip",{attrs:{size:"12px",color:"red-2","text-color":"black"}},[e._v("\n              Inactivo\n            ")])],1)]}},{key:"body-cell-permissions",fn:function(t){return[a("q-td",{attrs:{props:t}},e._l(t.row.permissions,(function(t){return a("q-chip",{key:t.id,attrs:{size:"12px",color:e.colorsPermissions[t.value],"text-color":"black"}},[e._v("\n              "+e._s(t.name)+"\n            ")])})),1)]}},{key:"body-cell-seller",fn:function(t){return[a("q-td",{attrs:{props:t}},[t.row.seller?a("q-icon",{staticClass:"text-green",attrs:{name:"fa fa-check"}}):e._e()],1)]}},{key:"body-cell-actions",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-btn",{attrs:{flat:"","fab-mini":"",color:"blue-grey",icon:"fa fa-ellipsis-v"}},[a("q-menu",[a("q-list",{staticStyle:{"min-width":"120px"}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.openUpdateDrawer(t.row)}}},[a("q-item-section",[e._v("Actualizar")])],1),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(a){return e.showModalDelete(t.row)}}},[a("q-item-section",{staticClass:"text-red"},[e._v("Eliminar")])],1)],1)],1)],1)],1)]}}])}),a("q-separator"),e.pagesNumber>1?a("div",{staticClass:"row q-mt-md"},[a("q-pagination",{attrs:{color:"grey-8",max:e.pagesNumber,size:"md"},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1):e._e()],1)],1),e.hasEmptyState?e._e():a("Sticky",{attrs:{simple:""},on:{add:function(t){return e.openAddDrawer()}}}),a("Delete",{attrs:{item:e.itemToDelete,target:e.itemToDelete.name,api:e.api,title:"Eliminar usuario"},model:{value:e.modalDelete,callback:function(t){e.modalDelete=t},expression:"modalDelete"}})],1)},r=[],i=a("ded3"),n=a.n(i),l=a("3ab0"),o=a("35ca"),c=a("649c"),u=a("2f62"),d={extends:l["a"],name:"Users",data(){return{api:o["a"],columns:[{name:"name",label:"Nombre",field:"name",sortable:!0,align:"left",headerClasses:"text-uppercase"},{name:"email",label:"Email",field:"email",sortable:!0,align:"left",headerClasses:"text-uppercase"},{name:"status",label:"Estado",field:"status",sortable:!0,align:"left",headerClasses:"text-uppercase"},{name:"seller",label:"Vendedor",field:"seller",sortable:!0,align:"center",headerClasses:"text-uppercase"},{name:"permissions",label:"Permisos",field:"permissions",align:"left",headerClasses:"text-uppercase"},{name:"actions",label:"",field:""}],colorsPermissions:{control:"red-3",prospect:"brown-3",clients:"blue-3",stock:"indigo-3",users:"orange-3",settings:"cyan-5"},filters:{name:""}}},components:{Delete:c["default"]},computed:{auth(){return this.$store.getters["auth/getUser"]}},mounted(){VueEvent.listen("deleted",this.deleteItem),VueEvent.listen("created-User",this.addItem),VueEvent.listen("updated-User",this.updateItem)},beforeDestroy(){VueEvent.unlisten("deleted",this.deleteItem),VueEvent.unlisten("created-User",this.addItem),VueEvent.unlisten("updated-User",this.updateItem)},methods:n()(n()({},Object(u["b"])("auth",["setUserMutation"])),{},{updateItem(e){this.items=this.items.map((t=>{if(t.id===e.id)for(let a in t)void 0!==e[a]&&(t[a]=e[a]);return t})),this.auth.user.id===e.id&&this.setUserMutation({user:e})},openAddDrawer(){this.addDrawer("UserCreate",{title:"crear usuario"},45)},openUpdateDrawer(e){let t=n()({},e);t.permissions=e.permissions.map((e=>e.value)),this.addDrawer("UserCreate",{title:"actualizar usuario",item:t},45)}})},p=d,m=(a("df64"),a("2877")),f=Object(m["a"])(p,s,r,!1,null,"dd8ae32e",null);t["default"]=f.exports},"35ca":function(e,t,a){"use strict";var s=a("5cd2"),r=a("7424");t["a"]={index(e){return r["a"].get(s["a"]+"users",e)},show(e){return r["a"].get(s["a"]+"users/"+e)},store(e){return r["a"].post(s["a"]+"users",e)},update(e,t){return r["a"].put(s["a"]+"users/"+e,t)},destroy(e){return r["a"].delete(s["a"]+"users/"+e)},login(e){return r["a"].post(s["a"]+"users/login",e)},permissions(){return r["a"].get(s["a"]+"users/permissions/list")}}},5055:function(e,t,a){},df64:function(e,t,a){"use strict";a("5055")}}]);